<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings - Mood Music & Quote Recommender</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .glass-effect {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            box-shadow: 0 4px 32px rgba(0,0,0,0.12);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-purple-900 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-8">Settings</h1>
        <div class="grid md:grid-cols-2 gap-8">
            <!-- Account Info -->
            <div class="glass-effect p-6">
                <h2 class="text-xl font-semibold mb-4">Account Information</h2>
                <form id="account-info-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Email</label>
                        <input type="email" id="settings-email" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="Update your email">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Profile Picture</label>
                        <input type="file" id="settings-profile-pic" accept="image/*" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white">
                    </div>
                    <button type="submit" class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg transition-colors">Save Changes</button>
                </form>
            </div>
            <!-- Password Change -->
            <div class="glass-effect p-6">
                <h2 class="text-xl font-semibold mb-4">Change Password</h2>
                <form id="password-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Current Password</label>
                        <input type="password" id="current-password" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="Current password">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">New Password</label>
                        <input type="password" id="new-password" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="New password">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">Confirm New Password</label>
                        <input type="password" id="confirm-password" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500" placeholder="Confirm new password">
                    </div>
                    <button type="submit" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg transition-colors">Change Password</button>
                </form>
            </div>
        </div>
        <!-- Notification Preferences -->
        <div class="glass-effect p-6 mt-8">
            <h2 class="text-xl font-semibold mb-4">Notification Preferences</h2>
            <form id="notifications-form" class="space-y-4">
                <div class="flex items-center">
                    <input type="checkbox" id="email-notifications" class="mr-2">
                    <label for="email-notifications" class="text-sm">Receive email notifications</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="app-notifications" class="mr-2">
                    <label for="app-notifications" class="text-sm">Receive in-app notifications</label>
                </div>
                <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors">Save Preferences</button>
            </form>
        </div>
        <!-- Danger Zone -->
        <div class="glass-effect p-6 mt-8 border border-red-500">
            <h2 class="text-xl font-semibold mb-4 text-red-400">Danger Zone</h2>
            <button id="delete-account" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition-colors">Delete Account</button>
        </div>
        <!-- Personal Information -->
        <div class="glass-effect p-6 mt-8">
            <h2 class="text-xl font-semibold mb-4">Personal Information</h2>
            <form id="personal-info-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Full Name</label>
                    <input type="text" id="settings-fullname" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white" placeholder="Your full name">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Username</label>
                    <input type="text" id="settings-username" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white" placeholder="Username">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Date of Birth</label>
                    <input type="date" id="settings-dob" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Gender</label>
                    <select id="settings-gender" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white">
                        <option value="">Select</option>
                        <option>Female</option>
                        <option>Male</option>
                        <option>Other</option>
                        <option>Prefer not to say</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Location</label>
                    <input type="text" id="settings-location" class="w-full bg-white/10 rounded-lg px-4 py-2 text-white" placeholder="City, Country">
                </div>
                <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors">Save Personal Info</button>
            </form>
        </div>
        <!-- Privacy Settings -->
        <div class="glass-effect p-6 mt-8">
            <h2 class="text-xl font-semibold mb-4">Privacy Settings</h2>
            <form id="privacy-form" class="space-y-4">
                <div class="flex items-center">
                    <input type="checkbox" id="profile-public" class="mr-2">
                    <label for="profile-public" class="text-sm">Make my profile public</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="show-mood-history" class="mr-2">
                    <label for="show-mood-history" class="text-sm">Show my mood history to others</label>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="allow-friends" class="mr-2">
                    <label for="allow-friends" class="text-sm">Allow friend requests</label>
                </div>
                <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-2 rounded-lg transition-colors">Save Privacy Settings</button>
            </form>
        </div>
    </div>
    <script>
        // Placeholder JS for forms (implement backend as needed)
        document.getElementById('account-info-form').onsubmit = e => {
            e.preventDefault();
            alert('Account info updated! (Implement backend logic)');
        };
        document.getElementById('password-form').onsubmit = async e => {
            e.preventDefault();
            const current = document.getElementById('current-password').value;
            const newPwd = document.getElementById('new-password').value;
            const confirm = document.getElementById('confirm-password').value;
            if (newPwd !== confirm) {
                alert('New passwords do not match!');
                return;
            }
            const res = await fetch('/api/change-password', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({current_password: current, new_password: newPwd})
            });
            const data = await res.json();
            if (data.success) {
                alert('Password changed successfully!');
            } else {
                alert(data.error || 'Failed to change password');
            }
        };
        document.getElementById('notifications-form').onsubmit = async e => {
            e.preventDefault();
            const emailNotif = document.getElementById('email-notifications').checked;
            const appNotif = document.getElementById('app-notifications').checked;
            // Add more preferences as needed
            const res = await fetch('/api/preferences', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    email_notifications: emailNotif,
                    app_notifications: appNotif
                    // Add more fields here
                })
            });
            const data = await res.json();
            if (data.success) {
                alert('Preferences saved!');
            } else {
                alert(data.error || 'Failed to save preferences');
            }
        };
        document.getElementById('delete-account').onclick = () => {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                alert('Account deleted! (Implement backend logic)');
            }
        };
    </script>
</body>
</html>
